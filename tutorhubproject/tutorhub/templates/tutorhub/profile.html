{% extends "tutorhub/layout.html" %}
{% block body %}
<div class="container mt-5">
    <h1>{{ profile.username }}'s Profile</h1>

    {% if profile.tutor_profile %}
        <h3>Tutor Details</h3>
        <p><strong>Availability:</strong> {{ profile.tutor_profile.availability }}</p>
        <h4>Subjects</h4>
        <ul>
            {% for subject in profile.tutor_profile.subjects.all %}
                <li>{{ subject.name }}</li>
            {% endfor %}
        </ul>
        <h4>Grade Levels</h4>
        <ul>
            {% for grade_level in profile.tutor_profile.grade_levels.all %}
                <li>{{ grade_level.level }}</li>
            {% endfor %}
        </ul>
        <h4>Credentials</h4>
        <ul>
            {% for credential in profile.tutor_profile.credentials.all %}
                <li><a href="{{ credential.file.url }}" target="_blank">View Credential</a></li>
            {% endfor %}
        </ul>
    {% else %}
        <p>This user is a student.</p>
    {% endif %}
    </div>

    {% if is_own_profile %}
        <form method="post">
            {% csrf_token %}
            <div class="form-group">
                <label for="nickname">Nickname</label>
                <input type="text" id="nickname" name="nickname" class="form-control" value="{{ profile.nickname }}">
            </div>
            <div class="form-group">
                <label for="bio">Bio</label>
                <textarea id="bio" name="bio" class="form-control">{{ profile.bio }}</textarea>
            </div>
            <div class="form-group">
                <label for="address">Address</label>
                <textarea id="address" name="address" class="form-control">{{ profile.address }}</textarea>
            </div>
            <button type="submit" class="btn btn-primary">Save Changes</button>
        </form>
    {% else %}
        <p><strong>Nickname:</strong> {{ profile.nickname }}</p>
        <p><strong>Bio:</strong> {{ profile.bio }}</p>
        <p><strong>Address:</strong> {{ profile.address }}</p>
    {% endif %}
</div>
{% endblock %}

